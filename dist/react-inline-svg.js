!function(e){"function"==typeof define&&define.amd?define(["react","jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("react"),require("jquery")):window.InlineSVG=e(window.React,window.jQuery)}(function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=i,n=a,r=!0,s=c=void 0}},a=function(t){function a(e){n(this,a),i(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,e),this.state={loading:!0}}return r(a,t),o(a,[{key:"componentWillMount",value:function(){s.instance.subscribe(this,this.props.src,function(e){e.setState({loading:!1})})}},{key:"render",value:function(){return this.state.loading?e.createElement("span",null):e.DOM.span({className:this.props.className,dangerouslySetInnerHTML:{__html:s.instance.getItem(this.props.src).content}})}}]),a}(e.Component);a.displayName="InlineSVG";var s=function(){function e(){n(this,e),this.cache={}}return o(e,null,[{key:"instance",get:function(){return this.singleton||(this.singleton=new e),this.singleton}}]),o(e,[{key:"getItem",value:function(e){return this.cache[e]||(this.cache[e]={subscribers:[]}),this.cache[e]}},{key:"subscribe",value:function(e,t,n){var r=this.getItem(t);switch(r.state){case"loaded":n(e);break;case"loading":r.subscribers.push(e);break;default:r.subscribers.push(e),this.load(t,n)}}},{key:"load",value:function(e,n){var r=this.getItem(e);if("loaded"==r.state||"loading"==r.state)return!1;var o=t.ajax({method:"GET",dataType:"text",url:e});return r.state="loading",o.success(function(e){r.state="loaded",r.content=e,n&&r.subscribers.forEach(n)}),!0}}]),e}();return a});